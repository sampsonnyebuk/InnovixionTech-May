(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,a,t){e.exports=t(31)},25:function(e,a,t){},31:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(6),o=t.n(r),c=(t(25),t(2)),m=t(5),s=t(8),i=t.n(s),u=t(13);t(26);const d=Object(n.createContext)(),p=e=>{let{children:a}=e;return l.a.createElement(d.Provider,{value:{toast:u.b}},l.a.createElement(u.a,{autoClose:2e3}),a)};var E=d;var h=e=>{let{title:a="CMS"}=e;const t=Object(c.o)(),{user:r,setUser:o}=Object(n.useContext)(i.a),{toast:s}=Object(n.useContext)(E);return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement(m.b,{to:"/",className:"navbar-brand"},a),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor01"},l.a.createElement("ul",{className:"navbar-nav ms-auto"},r?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/mycontacts",className:"nav-link"},"All Contacts")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/create",className:"nav-link"},"Create")),l.a.createElement("li",{className:"nav-item",onClick:()=>{o(null),localStorage.clear(),s.success("Logged out."),t("/login",{replace:!0})}},l.a.createElement("button",{className:"btn btn-danger"},"Logout"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))))};var b=e=>{let{navbar:a=!0,children:t}=e;return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement(h,null),l.a.createElement("div",{className:"container mt-3"},t))};var g=()=>{const e=Object(c.o)(),{user:a}=Object(n.useContext)(i.a);return Object(n.useEffect)(()=>{a||e("/login",{replace:!0})},[a,e]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h1",null,"Welcome ",a?a.name:null),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("a",{className:"btn btn-info",href:"/create",role:"button"},"Add Contacts")))};var f=()=>{const{toast:e}=Object(n.useContext)(E),{loginUser:a}=Object(n.useContext)(i.a),[t,r]=Object(n.useState)({email:"",password:""}),o=e=>{const{name:a,value:n}=e.target;r({...t,[a]:n})};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Login"),l.a.createElement("form",{onSubmit:n=>{n.preventDefault(),t.email&&t.password?a(t):e.error("please enter all the required fields!")}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"emailInput",className:"form-label mt-4"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"emailInput","aria-describedby":"emailHelp",name:"email",value:t.email,onChange:o,placeholder:"johndoe@example.com",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"passwordInput",className:"form-label mt-4"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"passwordInput",name:"password",value:t.password,onChange:o,placeholder:"Enter Password",required:!0})),l.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary my-3"}),l.a.createElement("p",null,"Don't have an account ? ",l.a.createElement(m.b,{to:"/register"},"Create One"))))};var v=()=>{const{toast:e}=Object(n.useContext)(E),{registerUser:a}=Object(n.useContext)(i.a),[t,r]=Object(n.useState)({name:"",email:"",password:"",confirmPassword:""}),o=e=>{const{name:a,value:n}=e.target;r({...t,[a]:n})};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Create your account"),l.a.createElement("form",{onSubmit:n=>{if(n.preventDefault(),!t.email||!t.password||!t.confirmPassword)return void e.error("please enter all the required fields!");if(t.password!==t.confirmPassword)return void e.error("password do not match!");const l={...t,confirmPassword:void 0};a(l)}},l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"nameInput",class:"form-label mt-4"},"Your Name"),l.a.createElement("input",{type:"text",class:"form-control",id:"nameInput",name:"name",value:t.name,onChange:o,placeholder:"John Doe",required:!0})),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"emailInput",class:"form-label mt-4"},"Email address"),l.a.createElement("input",{type:"email",class:"form-control",id:"emailInput","aria-describedby":"emailHelp",name:"email",value:t.email,onChange:o,placeholder:"johndoe@example.com",required:!0})),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"passwordInput",class:"form-label mt-4"},"Password"),l.a.createElement("input",{type:"password",class:"form-control",id:"passwordInput",name:"password",value:t.password,onChange:o,placeholder:"Enter Password",required:!0})),l.a.createElement("div",{class:"form-group"},l.a.createElement("label",{for:"confirmPassword",class:"form-label mt-4"},"Confirm Password"),l.a.createElement("input",{type:"password",class:"form-control",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:o,placeholder:"Enter Password",required:!0})),l.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-primary my-3"}),l.a.createElement("p",null,"Already have an account ? ",l.a.createElement(m.b,{to:"/login"},"Login"))))};var y=()=>{const{toast:e}=Object(n.useContext)(E),[a,t]=Object(n.useState)({name:"",address:"",email:"",phone:""}),r=e=>{const{name:n,value:l}=e.target;t({...a,[n]:l})};return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Create your contact"),l.a.createElement("form",{onSubmit:async n=>{n.preventDefault();try{const n=await fetch("http://localhost:8000/api/contact",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(a)}),l=await n.json();l.error?e.error(l.error):(e.success("Created [".concat(a.name,"] contact")),t({name:"",address:"",email:"",phone:""}))}catch(l){console.error("Error:",l)}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"nameInput",className:"form-label mt-4"},"Name Of Person"),l.a.createElement("input",{type:"text",className:"form-control",id:"nameInput",name:"name",value:a.name,onChange:r,placeholder:"John Doe",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"addressInput",className:"form-label mt-4"},"Address Of Person"),l.a.createElement("input",{type:"text",className:"form-control",id:"addressInput",name:"address",value:a.address,onChange:r,placeholder:"WalkStreet 05, California",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"emailInput",className:"form-label mt-4"},"Email Of Person"),l.a.createElement("input",{type:"email",className:"form-control",id:"emailInput",name:"email",value:a.email,onChange:r,placeholder:"johndoe@example.com",required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"phoneInput",className:"form-label mt-4"},"Phone Number Of Person"),l.a.createElement("input",{type:"tel",className:"form-control",id:"phoneInput",name:"phone",value:a.phone,onChange:r,placeholder:"+977 987654321",required:!0})),l.a.createElement("input",{type:"submit",value:"Add Contact",className:"btn btn-info my-2"})))},N=t(34);var C=e=>{let{splash:a="Loading..."}=e;return l.a.createElement("div",{className:"text-center mt-5"},l.a.createElement("div",{className:"spinner-border m-5",style:{width:"3rem",height:"3rem"},role:"status"},l.a.createElement("span",{className:"sr-only"})),l.a.createElement("h3",null,a))};var w=()=>{const{toast:e}=Object(n.useContext)(E),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(!1),[c,s]=Object(n.useState)({}),[i,u]=Object(n.useState)([]),[d,p]=Object(n.useState)("");Object(n.useEffect)(()=>{(async()=>{o(!0);try{const e=await fetch("http://localhost:8000/api/mycontacts",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),a=await e.json();a.error?console.log(a):u(a.contacts)}catch(e){console.log(e)}finally{o(!1)}})()},[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("h1",null,"Your Contacts"),l.a.createElement(m.b,{to:"/mycontacts",className:"btn btn-danger my-2"},"Reload Contact"),l.a.createElement("hr",{className:"my-4"}),r?l.a.createElement(C,{splash:"Loading Contacts..."}):l.a.createElement(l.a.Fragment,null,0===i.length?l.a.createElement("h3",null,"No contacts created yet"):l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"d-flex",onSubmit:e=>{e.preventDefault();const a=i.filter(e=>e.name.toLowerCase().includes(d.toLowerCase()));u(a)}},l.a.createElement("input",{type:"text",name:"searchInput",id:"searchInput",className:"form-control my-2",placeholder:"Search Contact",value:d,onChange:e=>p(e.target.value)}),l.a.createElement("button",{type:"submit",className:"btn btn-info mx-2"},"Search")),l.a.createElement("p",null,"Your Total Contacts: ",l.a.createElement("strong",null,i.length)),l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"table-dark"},l.a.createElement("th",{scope:"col"},"Name"),l.a.createElement("th",{scope:"col"},"Address"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"},"Phone"))),l.a.createElement("tbody",null,i.map(e=>l.a.createElement("tr",{key:e._id,onClick:()=>{s({}),s(e),t(!0)}},l.a.createElement("th",{scope:"row"},e.name),l.a.createElement("td",null,e.address),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.phone)))))))),l.a.createElement(N.a,{show:a,onHide:()=>t(!1)},l.a.createElement(N.a.Header,{closeButton:!0},l.a.createElement(N.a.Title,null,c.name)),l.a.createElement(N.a.Body,null,l.a.createElement("h3",null,c.name),l.a.createElement("p",null,l.a.createElement("strong",null,"Address"),": ",c.address),l.a.createElement("p",null,l.a.createElement("strong",null,"Email"),": ",c.email),l.a.createElement("p",null,l.a.createElement("strong",null,"Phone Number"),": ",c.phone)),l.a.createElement(N.a.Footer,null,l.a.createElement(m.b,{className:"btn btn-info",to:"/edit/".concat(c._id)},"Edit"),l.a.createElement("button",{className:"btn btn-danger",onClick:()=>(async a=>{if(window.confirm("Are you sure you want to delete this contact?"))try{const n=await fetch("http://localhost:8000/api/delete/".concat(a),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),l=await n.json();l.error?e.error(l.error):(u(l.myContacts),e.success("Deleted contact"),t(!1))}catch(n){console.log(n)}})(c._id)},"Delete"),l.a.createElement("button",{className:"btn btn-warning",onClick:()=>t(!1)},"Close"))))};var j=()=>{const{id:e}=Object(c.q)(),a=Object(c.o)(),{toast:t}=Object(n.useContext)(E),[r,o]=Object(n.useState)({name:"",address:"",email:"",phone:""}),[m,s]=Object(n.useState)(!1);return Object(n.useEffect)(async()=>{s(!0);try{const a=await fetch("http://localhost:8000/api/contact/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),t=await a.json();o({name:t.name,email:t.email,address:t.address,phone:t.phone}),s(!1)}catch(a){console.log(a)}},[e]),l.a.createElement(l.a.Fragment,null,m?l.a.createElement(C,{splash:"Loading Contact..."}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Edit your contact"),l.a.createElement("form",{onSubmit:async n=>{n.preventDefault();const l=await fetch("http://localhost:8000/api/contact",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({id:e,...r})}),c=await l.json();c.error?t.error(c.error):(t.success("Updated [".concat(r.name,"] contact")),o({name:"",address:"",email:"",phone:""}),a("/mycontacts"))}},l.a.createElement("input",{type:"submit",value:"Save Changes",className:"btn btn-info my-2"}))))};var O=()=>l.a.createElement(p,null,l.a.createElement(s.AuthContextProvider,null,l.a.createElement(b,null,l.a.createElement(c.c,null,l.a.createElement(c.a,{path:"/",element:l.a.createElement(g,null)}),l.a.createElement(c.a,{path:"/login",element:l.a.createElement(f,null)}),l.a.createElement(c.a,{path:"/register",element:l.a.createElement(v,null)}),l.a.createElement(c.a,{path:"/create",element:l.a.createElement(y,null)}),l.a.createElement(c.a,{path:"/mycontacts",element:l.a.createElement(w,null)}),l.a.createElement(c.a,{path:"/edit/:id",element:l.a.createElement(j,null)})))));o.a.render(l.a.createElement(m.a,null,l.a.createElement(O,null)),document.getElementById("root"))},8:function(e,a){}},[[20,1,2]]]);
//# sourceMappingURL=main.f447af8a.chunk.js.map